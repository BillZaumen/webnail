<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>Webnail Manual</title>
<STYLE TYPE="text/css" MEDIA="all">
A {color: rgb(65,225,128);}
A:link {color: rgb(65,225,128);}
A:visited {color: rgb(65,164,128);}
</STYLE>
</head>
<body>
<h1><a name="intro">Introduction</a></h1>
<p>
Webnail is a program that can create web pages and scale images so
that they fit within a box with a specified height and width, allowing
images to be conveniently laid out in HTML tables. Both the height and
width are scaled by the same amount.  Webnail can be run with a
graphical user interface or as a command-line program, the latter
allowing Webnail to be used conveniently in scripts.
</p>
<P>
While Webnail can be used as a web design tool and
includes capabilities for dynamic HTML, in particular a table-driven
maniupation of a Document Object Model (DOM), it can also be used
easily for simpler tasks.  This simpler tasks include
</P>
<UL>
  <li> Scaling an individual image to fit inside a bounding box.
  <li> Scaling a number of images to fit inside a bounding box with a
    specified height and width, storing the scaled images in either a
    directory or a ZIP file.
  <li> Generating a web page that allows multiple images to be displayed,
    using simple navigation controls to move between images. The files
    generated can be put in a directory, zip file. or WAR (Web ARchive)
    file.
</UL>
<P>
A typical web page that Webnail creates is shown
<A href="#browser">below</A>.  With the layout selected for this
example, Webnail can add optional HTML-formated text before and after
the images.  The images are shown in thumbnail form in a scroll pane
to make searching and selecting a particular image easy and
fast. There are also navigation controls to move to the first and last
image, and to the previous or next images.  It is also possible to
open a separate window or tab (browser dependent) containing the
current image, typically at higher resolution.  Each image can be
tagged with a title and description, and a default can be specified
for either.  In the example, only a title is shown.  Additional
controls allow the images to be displayed successively in a slideshow,
optionally in a window filling the screen.
</P>
<P>
<A name="browser"><img src="browser.png" width="833" height="1086"></A>
</P>
<P>
The choice of background color, text color, etc. can be altered through
the use of CSS style sheets.  It is also easy to add new layouts that
include standard components (e.g., a logo at the top of the page).
</P>

<h1><a name="basic">Basic use of Webnail</a></h1>
<P>
To start Webnail, either type the command <strong>webnail</strong> in a
terminal window or find it in a menu of installed programs (how to do
this is window-system dependent).  While there are a number of options,
only a few are needed for basic usage. While Webnail's window has a
number of controls, only a few are needed for basic use, as outlined in
the following sections.  A few controls are common to all of these:
</P>
<DL>
  <DT><strong>Output Controls</strong>
    <DD><IMG src="output.png" WIDTH="887" HEIGHT="67"></DD>
  <DT><strong>Width and Height Controls</strong>
    <DD><IMG src="maxhw.png" WIDTH="434" HEIGHT="40"></DD>
  <DT><strong>Input Control</strong>
    <DD><IMG src="input.png" WIDTH="624" HEIGHT="116"></DD>
  <DT><strong>Run Button</strong>
    <DD><IMG src="run.png" WIDTH="53" HEIGHT="34"></DD>
</DL>

<h2><a name="scaleOneImage"></a>Scale a Single Image</h2>
<P>
  This is the default, as specified by the output file type of "Image".
  <OL>
    <li>Pick an output file. Either enter the file name in the text
      field or push the adjacent Choose button to bring up a dialog box.
    <li>Provide a maximum image width and maximum image height, both in 
      units of pixels. A value of 0 (or a blank) indicates that the
      width or height is the actual width or height of the image.
    <li>Provide the input file by dragging and dropping an image file
      onto the red "target" icon, dragging and dropping a string
      providing a URL into the red "target" icon, or selecting an
      alternate input type (file input or URL input) and then
      providing the file or URL name.  
    <li>Push the Run button.
  </OL>
</P>
<h2><a name="scaleMultipleImages"></a>Scale Multiple Images</h2>
<P>
  For this option, select the Dir or ZIP output file type.  The images
  will appear in directory or Zip file respectively. An additional
  button is mentioned in the following instructions:
</P>
<BLOCKQUOTE>
  <IMG src="editImages.png" WIDTH="97" HEIGHT="29">
</BLOCKQUOTE>
<P>
  The following steps allow multiple images to be put into a directory
  or ZIP file.  Each image will fit in a bounding box whose width and
  height are the maximum image width and maximum image height
  respectively.
</P>
<OL>
  <li>Pick an output file or directory. Either enter the directory or
    zip-file name in the text field or push the adjacent Choose button
    to bring up a dialog box. For a zip file, the file name must end
    in the extension ".zip".
  <li>Provide a maximum image width and maximum image height, both in 
    units of pixels. A value of 0 (or a blank) indicates that the
    width or height is the actual width or height of the image.
  <li>Provide the input images, either by dragging the files from a
    file-browser window into the red target icon, dragging list
    * of strings into the read target icon, or using the File
    Input or URL Input options. You can provide images in multiple
    steps if needed (e.g., to get files from different directories).
  <li>Optionally push the EditImages button to bring up an image
    editor.  The image editor will allow you to reorder images and add
    or delete images.  The images will be displayed in thumbnail form.
  <li>Push the Run button.
</OL>

<h2><a name="createWebpage"></a>Create a Web Page</h2>
<P>
  For this option, select the Web Dir, Web ZIP, Web-Archive Dir, or
  Web-Archive output file type and provide a file or directory name.
  The Web Dir and Web ZIP options should be used for a basic web page.
  The Web-Archive Dir and Web-Archive options layout are use to create
  a web archive file (or a directory for a web archive file). WAR files
  can be used to deploy web applications, including ones consisting of
  static web pages. Some web servers provide mechanisms to install and
  remove web applications easily, and for these servers, a WAR file may be
  a convenient format.  With the use of a WAR file, "welcome" or "home"
  pages, MIME type mappings, etc. can be configured automatically.
  Some additional controls may be will may be used in addition to those
  described above:
</P>
<BLOCKQUOTE>
  <IMG src="editFields.png" WIDTH="610" HEIGHT="36">
</BLOCKQUOTE>
<P>
  To create a simple web page, follow these steps.
</P>
<OL>
  <li>Pick and output file or directory. Either enter the directory,
    zip-file name, or WAR file name in the text field or push the
    adjacent Choose button to bring up a dialog box. For a zip file,
    the file name must end in the extension ".zip". For a WAR file,
    the file name must end in the extension ".war".
  <li>Provide a maximum image width and maximum image height, both in 
      units of pixels. A value of 0 (or a blank) indicates that the
      width or height is the actual width or height of the image.
  <li>Optionally provide a window title and image title by pushing the
    corresponding button on the "Edit" line. A dialog box will appear.
    The image title should be formatted as HTML and will be used as default
    title for all images that do not provide their own title.
  <li>Provide the duration (Image Time) to use when images are displayed
    as a slideshow. The time should be a decimal number in units of
    seconds. Other formats are descibed below.
  <li>Provide the input images, either by dragging the files from a
    file-browser window into the red target icon, dragging URLs (shown
    as plain text) into the red target icon, or using the File Input
    or URL Input options. You can provide images in multiple steps if
    needed (e.g., to get files from different directories).
  <li>Optionally push the EditImages button to bring up an image
    editor.  The image editor will allow you to reorder images and add
    or delete images.  The images will be displayed in thumbnail form.
    Select an image in the list of thumbnail images to edit fields
    associated with that image. One can edit a title to override the
    default.
  <li>Push the Run button.
</OL>
<P>
An example of how the web page might look appears <A href="#browser">above</A>.
</P>
<h1><a name="gui">Running webnail with a GUI</a></h1>

<p>To run Webnail with a Graphical User Interface
(GUI), either type the command <strong>webnail</strong> in a
terminal window or find it in a menu of installed programs (how to do
this is window-system dependent). 

<h2><a name="giuMain">Top-level Window</a></h2>

Once Webnail is started, the following window will
appear:
<p>
<A name="guiMain"><img src="gui-main.png" width="910" height="716"></A>
</p>
<p>
This window contains a menu bar and a number of controls.
</p>
<H3><a name="menuBar">The Webnail-Window Menu Bar</A></H3>

<p>The menu bar contains four items: the
</p>
<ul>
  <li><strong>File</strong> menu with 5 options:
    <UL>
      <li><var>Load URL</var> to load a previously saved
    configuration from a URL.
      <li><var>Open File</var> to open a previously
	saved configuration file.
      <li><var>Save</var> to save the current configuration. If
	the Open File menu item was used to load the configuration, that
	file will be replace; Otherwise the program will prompt for the file
	name to use.
      <li><var>SaveAs</var> to save the current configuration
	under a new file name.
      <li><var>Quit</var> to exit from Webnail.
    </UL>
  <li><strong>Edit</strong> menu with 2 options:
    <UL>
      <li><var>Proxies</var> to edit the current proxy configutation
	as described in <A HREF="#proxies">Section ...</A>.
      <li><var>Additional Layouts</var> to add additional
	layouts to Webnail (a layout controls the appearance of HTML
	files that Webnail generate)
    </UL>
  <li><strong>Tools</strong> menu 2 menu items:
    <UL>
      <li><var>Show Stack Trace</var> to toggle whether stack traces
	should be shown in the console.
      <li><var>Open Console</var> to open a console to display
	messages.
    </UL>
  <li><strong>Help</strong> menu with 2 options:
    <UL>
      <li><var>Manual</var> to display an on-line manual.
      <li><var>About</var> to display information about Webnail.
    </UL>
</ul>
Typing Control-Q will cause Webnail to exit, and typing Control-S
will save the current configuration.
</p>
<H3 <A name="mainControls">Webnail-Window Controls</A></H3>
<p>
Keyboard
navigation is supported (the following apply to the default Java look
and feel):
</p>
<ul>
   <li>Hitting <em>tab</em> key will move the keyboard focus to the next
     control.
   <li>Hitting the <em>shift</em> key and the </em>tab</em> key 
     simultaneously will move the keyboard focus to the previous control.
   <li>Hitting the <em>space</em> key when a button has the keyboard focus
     is equivalent to clicking on the button.
</ul>
<P>
Webnail starts execution with the keyboard focus
set to the <em>Dir</em> radio button (the first radio button, labeled
<var>Image</var> is selected by default). The choice of the output
file type effects which controls are enabled - some controls are only
appropriate when generating HTML files.
</P>
<p>
There are a number of controls:
</p>
<blockquote>
<DL>
  <DT><strong>Output File Type</strong><DD>labels a set of radio
      buttons to select the type of the output file. The options are
      <UL>
	<li> <var>Image</var>.  The output file is a single image (only
	  one input image may be selected), with a file extension recognized
	  by the Java implementation (run "webnail -l" from a terminal window
	  to see the allowed MIME types and extensions). This is the default
	  when Webnail starts up.
	<li> <var>Dir</var>. The output is a directory used to store
	  multiple image output files.
	<li> <var>Zip</var>. The output is a ZIP file that will contain
	  a set of images files.
	<li> <var>Web Dir</var>. The output is a directory containing HTML
	  and image files.  A browser should open index.html in this directory.
	<li> <var>Web Zip</var>. The output is a ZIP file containing the
	  files that would have been produced for <var>Web Dir</var>. 
        <li> <var>Web-Archive-Dir</var>.  This creates all the directory
	  entries for the <var>Web Dir</var> option and in addition adds
	  a <var>Web-Inf</var> directory containing a file named
	  <var>web.xml</var>.  The <var>web.xml</var> file specifies
	  MIME type mappings and other information need to configure a web
	  server.
	<li> <var>Web-Archive</var>. This creates a file (Zip format)
	  containing the files that would have been created if the 
	  <var>Web-Archive-Dir</var> had been used. The file extension
	  must be <var>.war</var>.
      </UL>
  <DT><strong><A name="mimeType">Output Image Format or MIME
      Type</A></strong><DD> provides a selection of output-file
      formats or MIME types naming output-file formats. The choices
      are dependent on what the Java implementation supports.
  <DT><strong>Output File or Directory Name</strong><DD>provides the
      file or directory name for output.  One can enter this in
      the <em>Output File or Directory</em> text field.  Alternative
      the button adjacent to the text field named <em>Choose</em> can
      be pushed, in which case a dialog box that helps the user
      navigate through the file system will appear.  If a file name is
      given, the corresponding file will contain the scaled image, so
      only one input file may be selected.  If a directory name is
      given, the scaled-image files will be placed in that directory
      with names matching the names of the input files.
  <DT><strong>Layout</strong><DD>can have several values. The value
      <var>Default Layout</var> indicates that the web page
      created should contain a table containing a scrollable table of
      webnail images and a medium size image that changes depending
      on what webnail image is selected. The other options specify
      how to layout the images and text on a single page. The text is
      divided into three sections name the header, trailer, and final
      HTML.  The final HTML section always appears at the bottom of
      the page, after the last script that the webnail program
      provides (for the default layout). These additional options are
      <UL>
	<li><var>HTML5 Layout</var>A default layout that will
	  generate an HTML 5 web page.
	<li><var>Header, Images, Trailer</var>. The header appears
	  at the start of the page, followed by the images, which are laid
	  out in a grid, followed by the trailer.
	<li><var>Header, (Images & Trailer)</var>. The header appears
	  at the start of the page.  The Images and the trailer are in two
	  parallel columns with the trailer on the right and one image per
	  line on the left.
	<li><Var>Header, (Trailer & Images)</var>. The header appears
	  at the start of the page.  The Images and the trailer are in two
	  parallel columns with the trailer on the left and one image per
	  line on the right.
	<li><var>Images & (Header, Trailer)</var>. The pages starts
	  with two parallel columns. The left column contains the images,
	  one per line, and the right column contains the header followed
	  by the trailer.
	<li><var>(Header, Trailer) & Images</var>.  The pages starts
	  with two parallel columns. The right column contains the images,
	  one per line, and the left column contains the header followed
	  by the trailer.
	<li><var>Custom</var>. Use the previously specified custom
          layout, choosing one if a previously specified one is not available.
	  The layout is specified by giving its file name or URL.  For the
	  format of the layout file, please see
	  <A href="#layoutXMLElements">
	    the section	defining the layout-file format
	  </A>.
	<li><var>Set Custom Layout</var>. Choose a custom layout.
          This option is present only if <var>Custom</var> as previously
	  selected. The layout is specified by giving its file name or URL.
      </UL>
  <DT><strong>FullScreen Slideshow</strong><DD>is a check box that,
      when selected, indicates that the web page created should allow
      the user to open a full screen window (actually, nearly full
      screen) showing the images in a slideshow at a high resolution.
  <DT><strong>Sync Mode</strong><DD>indicates that a slideshow should
      try to stay in synchronization with the timing information
      provided. If one image takes too long to load, the subsequent
      images will be displayed for less time until the timing is
      correct. Unless the
      <strong>Wait on Error</strong> option is in effect, images that are
      "broken" (cannot be loaded with a detectable error) are ignored.
  <DT><strong>Wait on Error</strong><DD>is a check box that, when
      selected, indicates that, if an image is not available, that
      image's duration should be added to the previous image's
      duration rather than ignoring the image that caused the error.
  <DT><strong>Set Window Title</strong><DD>when clicked opens a dialog
      box that allows a title for a browser window to be specified (it
      provides the value for the HTML TITLE element in the document
      head).
  <DT><strong>FullScreen Background Color</strong><DD>is a button that opens
      a dialog that sets the background color for a full-screen
      slideshow window.  This does not change the background color of
      the main window.
  <DT><strong><A name="imageTime">Image Time</A></strong><DD>is a text
      field used to specify the time an image should be displayed in a
      slideshow. The value is specified as SECONDS, MINUTES:SECONDS,
      or HOURS:MINUTES:SECONDS, where SECONDS can either be an integer
      or a decimal number with up to three digits past the decimal
      point (comma in European notation).
  <DT><strong><A name="minImageTime">Minimum Image Time</strong><DD>is
      at text field used to specify a the minimum time for which an
      image can be displayed in a slideshow.  When <var>sync
      mode</var> is specified, the time an image is displayed may
      be reduced if the image arrives late (e.g., due to network
      delays) and this value ensures that reductions in display time
      will be shared by multiple following images. The value is
      specified as SECONDS, MINUTES:SECONDS, or HOURS:MINUTES:SECONDS,
      where SECONDS can either be an integer or a decimal number with
      up to three digits past the decimal point (comma in European
      notation).
  <DT><strong>Maximum Image Width</strong><DD>provides the maximum
      allowed image width measured in pixels.
  <DT><strong>Maximum Image Height</strong><DD>provides the maximum
      allowed image height measured in pixels.
  <DT><strong><A name="useLinks">Use links</a></strong><DD>is a check
      box that, when selected, specifies that links to the original
      images rather than copies should be used for any image that does
      not have to be scaled.
  <DT><strong>Flatten</strong><DD>specifies that, if the image width
      and height are not given (which implies no scaling), then the
      image appears in at the top level of the directory, ZIP file, or
      WAR file that is created.
  <DT><strong><A name="hrefToOrig">HREF link to Original
      Image</A></strong><DD> specifies that, unless an optional
      hyperlink URL fora specific image is given (see <var>Edit
      Images</var>), a medium-sized image, when clicked, should
      load the original image (which should be specified by a URL).
  <DT><strong><A name="title">Title</A></strong><DD>when clicked opens
      a dialog box that allows you to enter a default title for the
      images. The default title can be entered in a text area or by
      providing a URL indicating a resource that will be loaded to
      obtain the title. In either case the title contains HTML
      formatted text.  This default can be overridden as
      described <A HREF="#guiEdit">below.</A> When the Default Layout
      option described above is used, the title appears directly below
      the image on the web page that is generated.  Otherwise it the
      title appears only if the mouse is stationary over the image.
  <DT><strong><A name="descr">Description</A></strong><DD>when clicked
      opens a dialog box that allows you to enter a default
      description for the images. The default description can be
      entered in a text area or by providing a URL indicating a
      resource that will be loaded to obtain the description. In
      either case the description contains HTML formatted text.This
      default can be overridden as described 
      <A HREF="#guiEdit">below.</A> When the Default Layout option
      described above is used, the description appears directly below
      the title on the web page that is generated. For the other
      layout options, the description is ignored.
  <DT><strong>Head</strong><DD>when clicked opens a dialog box for
      entering or editing HTML text that should appear in the document
      head.  This can be used to add style sheets to the document.
      This text can be entered in a text area or by providing a URL
      indicating a resource that will be loaded to obtain the text. In
      either case the text must be HTML formatted.
  <DT><strong>Header</strong><DD>when clicked opens a dialog box for
      entering or editing HTML text that appears in the document. The
      position depends on the layout option chosen.  This text can be
      entered in a text area or by providing a URL indicating a
      resource that will be loaded to obtain the text. In either case
      the text must be HTML formatted.
  <DT><strong>Trailer</strong><DD>when clicked opens a dialog box for
      entering or editing HTML text that appears in the document. The
      position depends on the layout option chosen.  This text can be
      entered in a text area or by providing a URL indicating a
      resource that will be loaded to obtain the text. In either case
      the text must be HTML formatted.
  <DT><strong>Final HTML</strong><DD>when clicked opens a dialog box
      for entering or editing HTML text that appears in the
      document. The position is always at the end of the document.
      This text can be entered in a text area or by providing a URL
      indicating a resource that will be loaded to obtain the text. In
      either case the text must be HTML formatted.  When the default
      layout is used, the text will follow the script element
      that loads the scripts needed for navigation controls.  It can
      be used to load additional scripts (for performance reasons,
      scripts should be loaded at the end of an HTML document when
      possible).
</DL>
</blockquote>
<P>
The last 6 buttons, <var>Title</var>, <var> Description</var>,
<var>Head</var>, <var>Header</var>, <var>Trailer</var>,
<var>Final HTML</var> open similar dialog boxes. The one for the
<var>Title</var> button is a suitable example:
<P>
<img src="gui-title.png" width="682" height="317">
</P>
<P>
One may either enter text directly into a text area or use a URL to
reference the text.  The button <var>load using new URL</var>
will open a dialog box asking for a URL (a button will bring up an
file-chooser dialog for the case were the URL references a local
file). If accepted, the text area is disabled, but will contain the
text referenced by the URL, and the <var>load using new URL</var>
changes to one labeled <var>delete URL</var>. When a
<var>delete URL</var> is clicked, there are three options,
<var>Remove URL and clear text</var>,
<var>Remove URL and keep text</var>, and <var>Cancel</var>.
The <var>Remove URL and clear text</var> option, when clicked,
deletes the URL and clears the text associated with it.  The
<var>Remove URL and keep text</var> option deletes the URL but
keeps the text associated and enables the text area so that the text
can be edited if desired.  Finally, the <var>Cancel</var> option
closes the dialog box without performing any actions.
 </P>
<P>
The next set of controls are used to insert images into the application.
</P>
<blockquote>
<DL>
  <DT><strong><A name="inputControls">Drag and Drop Input</A></strong>
    <DD>when selected indicates that one intends to either drag and 
      drop images into the application or paste images that have been
      copied or cut from a file browser window. The drop target is
      denoted by an icon (a folder with a target symbol on it) and a
      paste operation is started by clicking the adjacent button.
  <DT><strong>File Input</strong><DD>when selected indicates that will
      either type a file name into a text field or click a "choose"
      button to open a dialog box that allows a file (or multiple
      files) to be selected.
  <DT><strong>URL Input</strong><DD>when selected indicates that the
      text field on the next line will contain a URL.
  <DT><strong>Add Images</strong><DD>when clicked (it is enabled only
      when necessary) causes the specified images to be copied into
      the program.
  <DT><strong>Edit Images</strong><DD>when clicked opens a panel for
      editing images that have been added.
  <DT><strong>Run</strong><DD>when clicked starts a task for
      generating scaled images and creating HTML files.
  <DT><strong>Cancel</strong><DD>when clicked cancels the last task.
  <DT><strong>Progress Bar</strong><DD>is the lowest control in the
      frame, and is a simple progress bar.  It turns green when image
      files are being created and indicates the number of files that
      have been processed.  It indicates the status of the
      last <strong>Run</strong> operation.
</DL>
</blockquote>

<H2><A name="guiEdit">The Image Editor</A></H2>

<P>
The Image Editor is displayed in a window shown below:
</P>

<P>
<IMG SRC="gui-edit.png" width="883" height="671">
</P>
<P>
The controls in this window are the following:
</P>
<BLOCKQUOTE>
<DL>
  <DT><strong>Input Controls</strong><DD>is a copy of the set of
      controls used to add images to the program described
      <A HREF="#inputControls">above</A>.
  <DT><strong>Image List</strong><DD>contains a single column of
      images that have been added. To edit an image, simply select
      it. In the figure above, the selected image is surrounded by a
      blue background (the "look and feel" may be different on a
      different platform). To edit entries, select a single one.  To
      move or delete images, you can cut the images and then paste
      them, or (for a contiguous range of images) drag and drop them.
  <DT><strong>Cut Selected Images from the List</strong><DD>when
      clicked cuts the currently selected images from the image list.
      When used multiple times, the images that were previously cut
      are kept and newly cut ones are appended to this list.  The drop
      point is before or after the image the mouse is over depending
      on whether the mouse is above or below the half-way point.  A
      line will appear showing the current drop position.
  <DT><strong>Delete Cut Images</strong><DD>permanently deletes the
      images than have been cut.
  <DT><strong>Paste Cut Images Before Selection</strong><DD>when
      clicked puts the images that were cut just before the selection.
      Only one image may be selected in this case.
  <DT><strong>Paste Cut Images After Selection</strong><DD>when
      clicked puts the images that were cut just after the selection.
      Only one image may be selected in this case.
  <DT><strong>URL</strong><DD>is an informative field simply showing
      the URL of an image (for local files, a <it>file</it> URL will
      be used.
  <DT><strong>Link Option</strong><DD>indicates where high-resolution
      images that do not have to be scaled are found. There are
      several options:
      <UL>
	<li><var>Default Link Option</var>. In this case, the link
	  option selected in the initial window is used as described
	  <A HREF="#useLinks">above</A>.
	<li><var>Do not link</var>. Regardless of the setting in the
	  initial window, a link will never be used and instead a copy of
	  the image will be used when the image does not have to be scaled.
	<li><var>Link to Original Image</var>. Regardless of the
	  setting in the initial window, a link to the original image will
	  always be used when the image does not have to be scaled.
      </UL>
  <DT><strong>Output MIME Type</strong><DD>allows one to specify the
      MIME type for the image that will be created.  If the
      option <var>Default</var> is used, the value provided in
      the initial window will be used as described
      <A HREF="#mimeType">above</A>. The remaining options are either MIME types
      or standard names for image formats that correspond to MIME types.
  <DT><strong>Edit Properties</strong><DD>when clicked opens a dialog
      box that allows an images properties to be edited as described
      <A HREF="#guiProperties">below</A>.
  <DT><strong>Image Time</strong><DD>is a text field used to specify
      the time an image should be displayed in a slideshow. The value
      is specified as SECONDS, MINUTES:SECONDS, or
      HOURS:MINUTES:SECONDS, where SECONDS can either be an integer or
      a decimal number with up to three digits past the decimal point
      (comma in European notation). When not blank, this control
      overrides the default image time specified in the initial window
      as described <A HREF="#imageTime">above</A>.
  <DT><strong>Minimum Image Time</strong><DD>is at text field used to
      specify a the minimum time for which an image can be displayed
      in a slideshow.  When <var>sync mode</var> is specified,
      the time an image is displayed may be reduced if the image
      arrives late (e.g., due to network delays) and this value
      ensures that reductions in display time will be shared by
      multiple following images. The value is specified as SECONDS,
      MINUTES:SECONDS, or HOURS:MINUTES:SECONDS, where SECONDS can
      either be an integer or a decimal number with up to three digits
      past the decimal point (comma in European notation). When not
      blank, this control overrides the default image time specified
      in the initial window as
      described <A HREF="#minImageTime">above</A>.
  <DT><strong>Optional Hyperlink Target</strong><DD>indicates whether
      clicking an image (not the thumbnail images used in the default
      layout) that has a link associated with it will cause the page
      the link references to appear in a new window or tab, or will
      replace the current page.  Value are
      <var>_top</var> (for a replacement) and <var>_blank</var>
      for a new window or tab (the names are standard HTML ones). This option
      is used for the default layout.  It is used for other layouts when the
      <var><A HREF="#hrefToOrig">HREF Link to Original
      Image</A></var> checkbox is selected.
  <DT><strong>Optional Hyperlink URL for Image</strong><DD>specifies
      the link to go to when a non-thumbnail image is clicked. This
      allows the link to refer to an arbitrary page instead of a
      larger version of the image. This option is used for the default
      layout.  It is used for other layouts when the
      <var><A HREF="#hrefToOrig">HREF Link to Original Image</A></var>
      checkbox is selected.
  <DT><strong>Title</strong><DD>allows you to enter a title for the
      currently selected image. The <var>load using new URL</var>
      button loads the title text from a server or file
      after specifying a URL.  When the Default Layout option
      described above is used, the title appears directly below the
      image on the web page that is generated.  Otherwise it the title
      appears only if the mouse is stationary over the image. If left
      empty, the default title provided in the initial window is used
      as described <A HREF="#title">above.</A>
  <DT><strong>Done Editing</strong><DD>when clicked saves the latest
      changes and closes the Image Editor window.
</DL>
</BLOCKQUOTE>
<h2><A name="layoutEdit">Layout Editor</A></h2>
<P>
The Layout Editor is contained in a window. It allows additional
layouts (the standard ones are always available)
to Webnail on a per-user basis.  Each layout is represented by a URL,
and the URLs are kept in Java preferences.
</P>

<h2><A name="proxies">Proxy Configuration</A></h2>
<P>
If proxies are needed to access servers, the following window can
be accessed via the <var>Proxies</var>menu item in the
<var>Edit</var> menu:
</P>
<br>
<IMG SRC="gui-proxy.png" width="753" height="650">
<P>
The controls are described below:
</P>
<BLOCKQUOTE>
<DL>
  <DT><strong>Use System Proxies</strong><DD>is a check box that, when
      selected, allows a system-specific proxy configuration file to
      be used to set up proxies.  Java documentation claims this has
      been done for Windows and the Gnome desktop. If a system does
      not support this option, the proxies Webnail
      uses can be manually set (the remaining configuration options
      apply only when this check box is not selected).
  <DT><strong>Configure HTTP Proxy</strong><DD>is a check box that,
      when selected and enabled, indicates that a proxy should be used
      for HTTP. The HTTP Proxy Host option must then
      be filled in.
  <DT><strong>HTTP Proxy Host</strong><DD>is a text field that
      contains the domain name of the HTTP proxy.
  <DT><strong>HTTP Proxy Port</strong><DD>is a text field that
      contains port that the HTTP proxy is configured to use.  The
      default value is 80.
  <DT><strong>Configure HTTPS Proxy</strong><DD>is a check box that,
      when selected and enabled, indicates that a proxy should be used
      for HTTPS. The HTTPS Proxy Host option must then be filled in.
  <DT><strong>HTTPS Proxy Host</strong><DD>is a text field that
      contains the domain name of the HTTPS proxy.
  <DT><strong>HTTPS Proxy Port</strong><DD>is a text field that
      contains port that the HTTPS proxy is configured to use. The
      default value is 443.
  <DT><strong>Exclude from HTTP[S] Proxy</strong><DD>specifies hosts
      that do not use an HHTP or HTTPS proxy. Multiple hosts can be
      specified by separating them with the character "|". In addition
      a wildcard character "*" can be used to indicate an arbitrary
      host: for example, "*.foo.com" would indicate any host whose
      domain name ends in ".foo.com".
  <DT><strong>Configure FTP Proxy</strong><DD>is a check box that,
      when selected and enabled, indicates that a proxy should be used
      for FTP. The FTP Proxy Host option must then be filled in.
  <DT><strong>FTP Proxy Host</strong><DD>is a text field that contains
      the domain name of the FTP proxy.
  <DT><strong>FTP Proxy Port</strong><DD>is a text field that contains
      port that the FTP proxy is configured to use. The default value
      is 80 (in the Java implementation, HTTP is used to contact the
      proxy).
  <DT><strong>Exclude from FTP Proxy</strong><DD>specifies hosts that
      do not use an HHTP or HTTPS proxy. Multiple hosts can be
      specified by separating them with the character "|". In addition
      a wildcard character "*" can be used to indicate an arbitrary
      host: for example, "*.foo.com" would indicate any host whose
      domain name ends in ".foo.com".
  <DT><strong>Configure SOCKS Proxy</strong><DD>is a check box that,
      when selected and enabled, indicates that a proxy should be used
      for SOCKS. The SOCKS Proxy Host and Proxy Port options must then
      be filled in.
  <DT><strong>SOCKS Proxy Host</strong><DD>is a text field that
      contains the domain name of the SOCKS proxy.
  <DT><strong>SOCKS Proxy Port</strong><DD>is a text field that
      contains port that the SOCKS proxy is configured to use.
  <DT><strong>Save &amp; Accept Preferences</strong><DD>when clicked,
      the current configuration is saved an used.
  <DT><strong>Accept Preferences</strong><DD>when clicked, the current
      configuration is used but not saved permanently.
  <DT><strong>Cancel Preference Changes</strong><DD>when clicked,
      cancels the changes since the window became visible.
</DL>
</BLOCKQUOTE>

<h1><a name="terminal">Running from a Terminal</a></h1>

<p>When started with no arguments, the GUI is displayed. If there is a
  single argument that does not start with "-", the GUI will be displayed
  and that file should be generated by the GUI's
  <!-- ' -->
  <bf>Save</bf>
  option. Otherwise the syntax is as follows:
</p>
<pre>
<strong>webnail </strong>[<strong>-</strong>[<strong>-U</strong>] [<strong>-A </strong><em> USER PASSWORD</em>]] [<strong-t </strong><em>TYPE</em>] <em>WIDTH Height</em> [<em>IFILE OFILE</em>]...
<strong>webnail </strong>[<strong>-</strong>[<strong>-U</strong>] [<strong>-A </strong><em> USER PASSWORD</em>]] [<strong>-t </strong><em>TYPE</em>] [<strong>-w </strong>[<strong>-i</strong>] [<em> WEB_OPTIONS</em>]]
          [<strong>-d</strong> <em>DIR</em><strong>]</strong> <em>WIDTH Height IFILE</em>...
<strong>webnail </strong>[<strong>-</strong>[<strong>-U</strong>] [<strong>-A </strong><em> USER PASSWORD</em>]] [<strong>-t </strong><em>TYPE</em>] [<strong>-w </strong>[<strong>-i</strong>] [<em> WEB_OPTIONS</em>]]
          [<strong>-z</strong> <em>ZIPFILE</em>] <em>WIDTH Height IFILE</em>...
<strong>webnail -f</strong> <em> XML_INPUT_FILE</em> <strong>-d</strong> <em>TARGET_DIRECTORY</em>
<strong>webnail -f</strong> <em> XML_INPUT_FILE</em> <strong>-z</strong> <em>ZIPFILE</em>
<strong> webnail -l</strong>
<strong> webnail --gui</strong> [<em>XML_INPUT_FILE</em>|<em>XML_INPUT_URL</em>]
</pre>
<p>where
</p>
<DL>
  <DT><em>Type</em><DD>is the MIME type of the output image.
  <DT><em>WIDTH</em><DD>is the maximum width in pixels of the
  scaled image.
  <DT><em>HEIGHT</em><DD>is the maximum height in pixels of
  the scaled image.
  <DT><em>IFILE</em><DD>is an input file.
  <DT><em>OFILE</em><DD>is an output file.
  <DT><em>XML_INPUT_FILE</em><DD>is an XML input file.
  <DT><em>XML_INPUT_URL</em><DD> is the URL of an XML Input File.
  <DT><em>DIR</em><DD>is a directory.
  <DT><em>ZIPFILE</em><DD>is the name of a zip file. The file
      name should end in the extension ".zip".  If
      the <strong>-i</strong> option is present, the extension should
      be ".war".
</DL>
<p>
Multiple input files can be provided.  If a directory is not provided
by using the <strong>-d</strong> option or a zip-file name is not provided
by using the <strong>-z</strong> option, input and output names must
appear in pairs, and if an output file name matches an existing file,
that file will be overridden.
</p>
<p>
The options are as follows:
</p>
<ul>
  <li><strong>-l</strong> lists the MIME types acceptable for an output
    file together with recognized file-name extensions.
  <li><strong>-t</strong> specifies the MIME type of the output file(s).
  <li><strong>-w</strong> indicates that the target directory or zip file 
    will contain the  files  needed
    for  a  web page displaying the images. Within this directory or
    zip file, the file named index.html specifies the  web  page  to
    display.
  <li><strong>-i</strong> indicates that the target directory or zip file 
    will contain a WEB-INF subdirectory that contains a web.xml file, as 
    required by the web archive standard. This option simplifies deployment
    to a web server.
  <li><strong>-d</strong> specifies a directory in which output will be
    placed, in which case the output file names will match the input file
    names excluding the file extension. Duplicate input file names (the 
    last component of the full path name) will result in an output file 
    being overridden.
  <li><strong>-z</strong> specifies a zip file in which output will be
    placed, in which case the output file names will match the input file
    names excluding the file extension.  Duplicate input file names (the 
    last component of the full path name) will result in an output file 
    being overridden.  If the file name is "-", standard output is used.
  <li><strong>-f</strong> specifies an XML input file (the following 
    argument) that provides all the relevant options for the directory
    or zip file that will be created.  If the file name is "-", standard
    input is used. File name extensions should be either ".xml" or ".wnl".
    if a <strong>-u</strong> option precedes the <strong>-f</strong> option,
    the argument following <strong>-f</strong> must be a URL. Aside from 
    a preceding <strong>-u</strong> option, the only options allowed with 
    a <strong>-f</strong> option are the <strong>-z</strong> and 
    <strong>-d</strong> options.
  <li><strong>-u</strong> indicates that the <em>FILENAME</em> arguments
    are URLs instead of system-dependent file names. This allows images 
    to be fetched from a server, local file, etc.
  <li><strong>-U</strong> indicates that the <em>FILENAME</em> arguments
    are URLs instead of system-dependent file names. This allows images 
    to be fetched from a server, file, etc. In addition, for full-sized
    images, a link to the original image instead of a local copy will be used.
  <li><strong>-a</strong> provides a user name and password for servers
    that require that a user be authenticated. The following arguments
    <em>USERNAME</em> and <em>PASSWORD</em> provide the user name and
    password respectively.
  <li><strong>--gui</strong> indicates that the GUI should start. A subsequent
    optional argument is either a file name or URL providing an input
    configuration in XML format. This option is provided to allow
    Webnail to fit into various desktop environments (e.g.,
    the GNOME desktop, where a Desktop file can specify how to start a
    program).
</ul>
<h2><a name="weboptions"> Web Options</a></h2>
<p>
Several options are applicable only when the <strong>-w</strong> command-line
argument is present.
<ul>
  <li><strong>-C</strong> specifies the background color to use on
    HTML pasges.  The color is specified by any form acceptable as a
    color by CSS1 (Cascading Style Sheets version 1).  The color is
    provided in the following argument.
  <li><strong>-X</strong> specifies the foreground (or text) color to
    use when on HTML pages.  The color is specified by any form
    acceptable as a color by CSS1 (Cascading Style Sheets version 1).
    The color is provided in the following argument.
  <li><strong>-r</strong> indicates that icons should use a
    light color suitable for a dark background.
  <li><strong>-W</strong> indicates that when a slideshow is running in 
    full-screen mode, if there is an error loading an image, the previous
    image will be displayed until the time interval for the image that
    caused the error has expired.
  <li><strong>-S</strong> indicates that when a slideshow is running in
    full-screen mode, and an image arrives late, the time interval for
    that image (and perhaps subsequent ones) will be shortened with a goal
    of synchronizing the display time with the sequence of times indicated
    by the image-Time interval.
  <li><strong>-I</strong> gives the time interval for displaying an image
    in a slideshow.  The following argument gives the time in units of
    milliseconds.
  <li><strong>-L</strong> gives the minimal time interval for displaying
    an image in a slideshow, and is used when the image's time interval
    has to be shortened for time synchronization.  The following argument
    contains the value in units of milliseconds.
  <li><strong>-T</strong> indicates that the following argument contains
    a title to display below the image.
  <li><strong>-X</strong> indicates that the following argument contains
    a title for the browser's window (this sets the TITLE element in the
    HTML HEAD element.  If not present, a default will be used.
  <li><strong>-D</strong> indicates that the following argument contains
    a description that will appear immediately below the title.
  <li><strong>-M</strong> configures the web page to disable full-screen
    mode for slideshows, and eliminates the presence of high-resolution
    images.
  <li><strong>-F</strong> indicates where to put high-resolution images.
    Normally when the <strong>-w</strong> is used, high resolution images
    are placed in a subdirectory named "high". When this option is
    present, the high resolution images go into the directory specified
    by the <strong>-d</strong> option (or the zip file specified by the
    <strong>-z</strong> option).
  <li><strong>-H</strong> sets up the web page so that when you click on 
    the larger image (not one of the thumbnail images), one will follow 
    a link to the original image.  The image arguments should in this 
    case preferably be URLs, not file names (a file name would be converted
    to a "file" URL, but this is appropriate only for use on a single 
    computer system).
</ul>
</p>

<h1><a name="reservedIDs">Reserved HTML IDs</a></h1>
<P>
With the web-page options, Webnail will create a
an HTML file named "index.html" that the user will open. This file is
located in either the output directory or the zip file that
Webnail creates.  Elements in HTML files can
have IDs associated with them, and a given ID may only appear once.
The index.html file that Webnail uses the following
IDs for all layouts:
</P>
<BLOCKQUOTE>
<DL>
  <DT><strong>body</strong><DD>is the ID for the HTML <strong>body</strong>
      element.  This explicitly sets the background color to lightgray for
      the default layout and to white for the other layouts.
  <DT><strong>imagesTable</strong><DD>is the ID for the outermost table
      containing images.
</DL>
</BLOCKQUOTE>
<P>
The index.html file that Webnail uses the following
IDs for the default layout but not any of the other layout options:
</P>
<BLOCKQUOTE>
<DL>
  <DT><strong>webnailTable</strong><DD>is the ID of the table containing
      an <var>IFRAME</var> that contains thumbnail images.
  <DT><strong>imageTable</strong><DD>is the ID of the table containing images
      scaled to fit in a bounding box 500 pixels by 500 pixels.
  <DT><strong>titleDescrTable</strong><DD>is the ID of a table that contains
      the title and the description, each on a separate row.
  <DT><strong>title</strong><DD>is the ID of a <strong>SPAN</strong> element
      that contains the title for an image.
  <DT><strong>descr</strong><DD>is the ID of a <strong>SPAN</strong> element
      that contains the description of an image.
  <DT><strong>noJavascriptMsg</strong><DD>is the ID of a Table-Data element
      (a <var>TD</var> tag) that contains text indicating that
      Javascript is needed.  This tag sets its text color to "red" by
      default.
</DL>
</BLOCKQUOTE>
<P>
A style sheet that changes the background and text colors should put
the text "! important" after setting colors for the "body" ID and the
"noJavascriptMsg" ID in order to override the explicit settings in the
elements with these IDs.  Generally all three (background color,
default text color, and the text color for the "no-script" warning)
should be changed if any one is to be changed to ensure readability by
the user (e.g., to avoid red text on a red background as an extreme
example). If the foreground or background color should vary depending
on what image is selected, that can be handled by setting up a DOM
Map entry and putting the selection in a matching property element
for the image.
</P>

<h1><a name="xml"> XML Syntax</a></h1>
<P>
An input file can be used to configure the output directory, ZIP file, or
WAR file.  The following provides a specification of this input file's
<!-- ' -->
format. It is of interest primarily to those who want to create
software that generates input files for Webnail as
Webnail itself has a built-in editor that can read,
edit, and write files in this format.
</P>
<P>
When the <strong>-f</strong> option is used on the command-line or an
input file is loaded via the "Load" menu option in the "File" menu
when using the GUI, the output is completely specified by an XML
file. This XML input file provides more options than are possible
using the command-line interface, but identical options to those that
the GUI provides.  The file should start with the
following two lines:
<blockquote>
<pre><small>
&lt;?xml version="1.1" encoding="UTF-8"?&gt
&lt;!DOCTYPE webnail PUBLIC "-//wtz//Webnail 1.0//EN"
                           "sresource:webnail-1.0.dtd"&gt;
</small></pre>
</blockquote>
<P>
Whitespace in the DOCTYPE element must consist of a single space,
not two or more successive spaces or tabs: while the XML parser will
not accept multiple spaces, the rules used to determine the file's
MIME type are more strict.  Within this file, URL's starting with
"resource" are interpreted by the program as resources that can be
obtained from the program's JAR file.
</P>

<H2><A name="dtdElements">XML Elements</A></H2>

<P>
The following describe the XML elements for Webnail's
file format - the format used to save the state of a webnail session
or to configure a webnail session.
</P>

<H3><A name="dtdImages">The webnail element</A></H3>

The top level element is named webnail, and it is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT webnail (domMap?, title?, descr?, (user, password)?,
	  head?, header?, image*, trailer?, finalHtml?)&gt;
&lt;!ATTLIST images
          xmlns CDATA #FIXED "http://bzdev.org/DTD/webnail-1.0"
	  windowTitle CDATA #IMPLIED
	  mimeType  CDATA #IMPLIED
	  webMode (true|false) #IMPLIED
	  linkMode (true|false) #IMPLIED
	  flatMode (true|false) #IMPLIED
	  highResMode (true|false) #IMPLIED
	  webArchiveMode (true|false) #IMPLIED
          zipped  (true|false) #IMPLIED
	  syncMode (true|false) #IMPLIED
	  waitOnError (true|false) #IMPLIED
	  imageTime CDATA #IMPLIED
	  minImageTime CDATA #IMPLIED
	  bgcolor  CDATA #IMPLIED
	  fgcolor  CDATA #IMPLIED
	  rvmode  (true|false) #IMPLIED
	  height  CDATA #IMPLIED
	  width   CDATA #IMPLIED
	  hrefToOrig (true|false) #IMPLIED
	  layout (normal
	          | headerThenImagesThenTrailer
	          | headerThenImagesAndTrailer
	          | headerThenTrailerAndImages
	          | imagesAndHeaderWithTrailer
                  | headerWithTrailerAndImages) #IMPLIED&gt;
</pre>
</blockquote>
<P>
The child elements are described below.  The attributes are defined
as follows:
</P>
<ul>
  <li><var>windowTitle</var> is
    the title that will appear in the browser's
    <!-- ' -->
    menu bar.
  <li><var>mimeType</var> is
    the MIME type of scaled image files.  The default value is image/jpeg.
  <li><var>webMode</var> has a default value of false. When
    true,  the output directory or zip file will be set up for use
    with a web site.
  <li><var>linkMode</var> has a default value of false. When true
    indicates that for full resolution images, when the image is specified
    using a URL, provide a link to the image rather than copying it.
  <li><var>flatMode</var> has a default value of false. When
    true, it indicates that the high resolution images are not put in a
    sub-directory when webMode is true.  If the images are not scaled and
    its MIME type matches the MIME type specified by the mimeType
    attribute (or its default value), then the image will not be copied.
  <li><var>highResMode</var> has a default value of true. 
    When it is false, high resolution images are
    not included and the full-screen option for a slideshow will not appear.      <li><var>webArchiveMode</var> has a default value of
      false.  When set to true (the default is false), the output
      will be a web-archive file, or a directory with the same
      structure.  There will be a WEB-INFO/web.xml entry that
      specifies how a web server should be configured.
  <li><var>zipped</var> has a default value of false. When true, the
    output will be a ZIP file (or WAR file, which uses ZIP).
  <li><var>syncMode</var> has a default value of
    false. When it is true, if an image (e.g., one obtained
    from a web server) arrives late, the duration over the
    image and subsequent ones are shown will be adjusted to
    compensate for the delay.
  <li><var>waitOnError</var> has a default value of false.  When
    true, if images were skipped because errors were detected while
    attempting to download them, the skipped images'
    <!-- ' --> imageTime (the duration for which an image should be
    displayed) will be added to the imageTime of the currently
    displayed image.
  <li><var>imageTime</var> has a default value of 10 seconds. It gives
    the duration for which an image should be displayed in seconds (three digits
    pass a decimal point are allowed to specify time in milliseconds).  To
    specify times in minutes and seconds, separate minutes and seconds with a
    colon. To specify the duration in hours, minutes and seconds, separate
    hours and minutes, and minutes and seconds, with a colon.  Thus,
    1:0:20.5, 60:20.5, and 80.5 all represent the same value.
  <li><var>minImageTime</var> has a default value of 4
    seconds. It gives the minimum duration for which an image should
    be shown when syncMode is true.
  <li><var>bgcolor</var> has a default value of "gray".  It
    specifies the background color used on HTML pages.  See the
    CSS specification for the syntax.
  <li><var>fgcolor</var> has a default value of "black".  It specifies
    the foreground (or text) color used on HTML pages.  See the
    CSS specification for the syntax.
  <li><var>height</var> the height of a bounding box for 
    high-resolution images in pixels.  The default value is 0, indicating the
    width in pixels of the original image.
  <li><var>width</var> the width of a bounding box for 
    high-resolution images in pixels.  The default value is 0, indicating the
    width in pixels of the original image.
  <li><var>hrefToOrig</var>. This attribute has a value of true
    or false.  When true, a default value for the hrefURL attribute of
    each image element is provided, the URL of the original unscaled
    image.  When false, the hrefURL attribute defaults to a scaled
    copy whose bounding box is the height and width attributes above.
  <li><var><A name="layout">layout</A></var>. This attribute
    specifies a layout for the web page (index.html). The attribute
    value is a URL pointing to the file describing the layout. The
    URLs for the layouts built into Webnail use a
    protocol named <var>sresource</var>, which indicates that
    the layout is stored in a resource accessible from the
    Webnail's
    <!-- ' --> class path (e.g., in the Webnail JAR file).
</ul>

<H3><A name="dtdTitle">The Title Element</A></H3>

<P> The <strong>title</strong> element is defined by the following
declaration:
</P>
<blockquote>
<pre>
&lt;!ELEMENT title (#PCDATA)*&gt;
&lt;!ATTLIST title
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
The content gives a title. When it appears as a child of the
<var>images</var> element, it gives the default title to display
below an image. When it appears in an
<var>image</var> element, it gives the title for a specific
image.  The value is spliced into an HTML document. The entities
"&amp;lt;", "&amp;gt;", "&amp;amp;", or "&amp;quot" should be used
instead of the corresponding characters, or the value should appear in
a CDATA section (delimited by "&lt;![CDATA[" and "]]&gt;").  If the
url attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>
<H3><A name="dtdDescr">The Descr Element</A></H3>
<P>
The descr element is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT descr (#PCDATA)*&gt;
&lt;!ATTLIST descr
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
The descr element gives a description, which is displayed directly
below the title.  When it appears as a child of the images element, it
gives the default description. When it appears as a child of an image
element, it provides the description for that specific image. The
value is spliced into an HTML document. The entities "&amp;lt;",
"&amp;gt;", "&amp;amp;", or "&amp;quot" should be used instead of the
corresponding characters, or the value should appear in a CDATA
section (delimited by "&lt;![CDATA[" and "]]&gt;"). If the
url attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>

H3><A name="dtdHead">The Head Element</A></H3>


<P>
The head element is defined by the following declaration:
</P>
<blockquote>
<pre>
&lt;!ELEMENT head (#PCDATA)*&gt;
&lt;!ATTLIST head
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
and its content will appear in the HEAD section of an HTML document. 
The entities "&amp;lt;", "&amp;gt;", "&amp;amp;", or "&amp;quot"
should be used instead of the corresponding characters, or the value should
appear in a CDATA section (delimited by "&lt;![CDATA[" and "]]&gt;".
This allows various HTML elements to be added. These will be the last
elements in the HEAD section of the document and for the default layout
in particular, these declarations will follow the SCRIPT declarations that
load the scripts <CODE>params.js</CODE> and <CODE>slideshow1.js</CODE>. If the
url attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>

<H3><A name="dtdHeader">The Header Element</A></H3>

<P>
The header element is defined by the following declaration:
</P>
<blockquote>
<pre>
&lt;!ELEMENT header (#PCDATA)*&gt;
&lt;!ATTLIST header
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
Its content will appear at a position determined by
the <A HREF="#layout">layout</A>. The entities "&amp;lt;", "&amp;gt;",
"&amp;amp;", or "&amp;quot" should be used instead of the
corresponding characters, or the value should appear in a CDATA
section (delimited by "&lt;![CDATA[" and "]]&gt;". If the
url attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>

<H3><A name="dtdImage">The Image Element</A></H3>

<P>
The image element is defined by the following:
</P>
<blockquote>
<pre>
&lt;!ELEMENT image ((filename | url), title?, descr?, (user, password)?,
	  property*)&gt;
&lt;!ATTLIST image
	  mimeType  CDATA #IMPLIED
	  linkMode (true|false) #IMPLIED
	  clickURL  CDATA #IMPLIED
	  clickTarget (_blank|_top) #IMPLIED
	  imageTime CDATA #IMPLIED
	  minImageTime CDATA #IMPLIED&gt;
</pre>
</blockquote>
<P>
Each image element and its children define a separate image.  The
attributes for the image element are:
</P>
<ul>
  <li><var>mimeType</var> specifies the MIME type of scaled
    image.  The default value that given as an attribute of
    the <var>images</var> element.
  <li><var>linkMode</var> has a default value equal to that for
    the surrounding <var>images</var> element.  When true, for full
    resolution images and when the image is specified using a URL, a link to
    the original URL is used rather than a local copy.
  <li><var>hrefURL</var> is an optional attribute that provides a URL
    to load when the image (not the thumbnail) is clicked on the web page.
  <li><var>hrefTarget</var> indicates the target when the image (not the 
    thumbnail) is clicked.  Possible values are _blank (a new window or frame)
    and _top (replace the current page).  The default is _blank.
  <li><var>imageTime</var> is the duration for which the image
    should be displayed in seconds (three digits pass a decimal point are
    allowed to specify time in milliseconds).  To specify times in minutes
    and seconds, separate minutes and seconds with a colon. To specify the
    duration in hours, minutes and seconds, separate hours and minutes,
    and minutes and seconds, with a colon.  Thus, 1:0:20.5, 60:20.5, and
    80.5 all represent the same value. The default value is that of the
    enclosing <var>images</var> element.
  <li><var>minImageTime</var> specifies the minimum duration for which
    an image should be shown when syncMode is true. The syntax is the
    same as for the imageTime attribute.  The default value
    is that of the enclosing images element.
</ul>

<P> The children for the image element not previously defined are the
url, filename, and property elements.
</P>

<H3><A name="dtdFilename">The Filename Element</A></H3>


<P>
The filename element is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT filename (#PCDATA)*&gt;
</pre>
</blockquote>
<P>
Its content is a file name. A fully qualified name is preferable.
The <strong>filename</strong> and url elements are
mutually exclusive within an image.
</P>

<H3><A name="dtdURL">The URL Element</A></H3>

<P>
The url element is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT url (#PCDATA)*&gt;
</pre>
</blockquote>
<P>
Its content is a URL indicating the location of the original image.
The filename and url elements are mutually exclusive within an image.
</P>

<H3><A name="dtdProperty">The Property Element</A></H3>


<P>
The <strong>property</strong>element is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT property (#PCDATA)*&gt;
&lt;!ATTLIST property
	  key CDATA #REQUIRED&gt;
</pre>
</blockquote>
<P>
The key attribute contains the name of a key provided in a
mapping element, which specifies an HTML element ID,
and the Javascript property for the matching DOM element.  The contents of
a property element gives the value to assign to the
corresponding property of an HTML element in the DOM.  If a
property element is not provided,
</P>

<H3><A name="dtdTrailer">The Trailer Element</A></H3>

<P>
The trailer element follows all of the image elements
and is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT trailer (#PCDATA)*&gt;
&lt;!ATTLIST trailer
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
Its content provides HTML to insert in a position dependent on the
<A HREF="#layout">layout</A>. The entities "&amp;lt;", "&amp;gt;",
"&amp;amp;", or "&amp;quot" should be used instead of the
corresponding characters, or the value should appear in a CDATA
section (delimited by "&lt;![CDATA[" and "]]&gt;". If the
<strong>url</strong> attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>

<H3><A name="dtdAfterScript"></A>The After-Script Element</H3>


<P>
The finalHtml element is the final element enclosed in an
images element.  It is defined as follows:
</P>
<blockquote>
<pre>
&lt;!ELEMENT finalHtml  (#PCDATA)*&gt;
&lt;!ATTLIST finalHtml
             url CDATA #IMPLIED &gt;
</pre>
</blockquote>
<P>
Its content provides HTML that should follow
the SCRIPT element that includes
the <CODE>slideshow2.js</CODE> script.  This appears near the end
of the document for performance reasons. The entities "&amp;lt;",
"&amp;gt;", "&amp;amp;", or "&amp;quot" should be used instead of the
corresponding characters, or the value should appear in a CDATA
section (delimited by "&lt;![CDATA[" and "]]&gt;". If the
<strong>url</strong> attribute is provided, the content should be empty,
with the URL referencing a resource that contains the content (as HTML
without the need to specially encode "&amp;", "&lt;", "&gt;", or "&quot;").
</P>
<H1><A name="layoutXML">Layout XML Syntax</A></H1>
<P>
Webnail layout files provide parameter values specific to a given
layout and URLs for various files or resources.  Each file must
start with the following two lines:
</P>
<blockquote>
<pre><small>
&lt;?xml version="1.1" encoding="UTF-8"?&gt
&lt;!DOCTYPE images PUBLIC "-//BZDev//Webnail_Layout_Info 1.0//EN"
                           "sresource:webnail-layout-1.0.dtd"&gt;
</small></pre>
</blockquote>
Whitespace in the DOCTYPE elemement must consist of a single space, not
two or more successive spaces or tabs: while the XML parser will not
accept multiple spaces, the rules used to determine the file's MIME
type are more strict.

<H2><A name="layoutXMLElements">Layout XML Elements</A></H2>

The top-level element in a Webnail layout file is an element named
"layout", and must specify a default XML namespace. The DTD for
this element is
<blockquote>
<pre>
&lt;!ELEMENT layout (multi | single)&gt;
&lt;!ATTLIST layout
	  xmlns CDATA #FIXED "http://bzdev.org/DTD/webnail-layout-info-1.0"&gt;
</pre>
</blockquote>
<P>
The layout element is contains a single element: either
a <CODE>multi</CODE> element or a <CODE>single</CODE> element.
A <CODE>multi</CODE> element indicates the use of multiple HTML files,
typically with an iframe of thumbnail images. A <CODE>single</CODE> element
indicates that all the images will be laid out on a single page,
suitable for printing or other uses.
</P>
<blockquote>
<pre>
&lt;!ELEMENT multi (name)*&gt;
&lt;!ATTLIST multi
	  twidth CDATA #REQUIRED
	  theight CDATA #REQUIRED
	  mwidth CDATA #REQUIRED
	  mheight CDATA #REQUIRED
	  marginw CDATA #REQUIRED
	  marginh CDATA #REQUIRED
	  margin_hpad CDATA #REQUIRED
	  margin_vpad CDATA #REQUIRED
	  t_vpad  CDATA #REQUIRED
	  num_t_images CDATA #REQUIRED
	  t_vcorrection CDATA #REQUIRED
	  name CDATA #REQUIRED
	  url CDATA #REQUIRED&gt;
</pre>
</blockquote>
The multi element's attributes are defined as follows:
<ul>
  <li><var>twidth</var>. The width of each thumbnail image's
    bounding box in pixels.
  <li><var>theight</var>. The height of each thumbnail image's
    bounding box in pixels.
  <li><var>mwidth</var>. The width of each medium image's
    bounding box in pixels.
  <li><var>mheight</var>. The height of each medium image's
    bounding box in pixels.
  <li><var>marginw</var>. The margin padding on each horizontal
    side of the frame containing thumbnails or the medium-sized image.
    This is the marginwidth attribute for a thumbnail and medium-image
    IFRAME.
  <li><var>marginh</var>. The margin padding on each vertical
    side of the frame containing thumbnails or the medium-sized
    image. This is the marginheight attribute for a thumbnail and
    medium-image IFRAME>.
  <li><var>margin_hpad</var>. Additional horizontal padding for
    thumbnails and the medium-sized image beyond the amount expected
    from the marginw attribute (twice its value). This
    additional separation prevents some browsers from placing a scroll pane
    around an image and allows space for a border around selectable images.
  <li><var>margin_vpad</var>. Additional vertical padding for
    thumbnails and the medium-sized image beyond that expected from
    the marginh attribute (twice its value).  This
    additional separation prevents some browsers from placing a scroll pane
    around an image and allows space for a border around selectable images.
  <li><var>t_vpad</var>. The vertical separation from a thumbnail
    image's bounding box to the midpoint between adjacent thumbnail images,
    measured from the center of each image's bounding box.
  <li><var>num_t_images</var>. The number of thumbnail images
    visible in a scrollable frame.
  <li><var>t_vcorrection</var>. Correction term in pixels for the
    thumbnail-frame height. This value is added to the frame height that
    would be computed from the other parameters.
  <li><var>name</var>.  This is the default print name for the
    layout as displayed in a combo box. Multiple
    <var>name</var> elements can also be provided to
    give locale-specific alternatives.
  <li><var>url</var>. The URL of the top-level HTML page
    generated.
</ul>
<P>
These attributes are used to determine the values of the following
template parameters:
</P>
<ul>
  <li><var><A name="marginw">marginw</A></var>. The value is
    identical to that provided by the marginw
    attribute.
  <li><var><A name="marginh">marginh</A></var>. The value is identical
    to that provided by the marginh attribute.
  <li><var><A name="tWidth">tWidth</A></var>. The value is computed
    from the twidth, marginw and margin_hpad using the expression
    <code>twidth</code> + 2 * <code>marginw</code> + <code>margin_hpad</code>.
  <li><var><A name="tHeight">tHeight</A></var>. The value is computed
    from the theight, t_vpad, _t_images, margin_vpad, and _vcorrection
    using the expression ((<code>theight</code> + (2
    * <code>t_vpad</code>)) * <code>num_t_images</code>) + (2
    * <code>marginh</code>) + <code>margin_vpad</code>
    + <code>t_vcorrection</code>.
  <li><var><A name="iWidth">iWidth</A></var>. The value is computed
    from the mwidth, marginw, and margin_hpad attributes using the
    expression <code>mwidth</code> + 2 * <code>marginw</code> +
    <code>margin_hpad</code>.
  <li><var><A name="iHeight">iHeight</A></var>. The value is computed
    from the mheight, marginh, and margin_vpad attributes using the
    expression <code>mheight</code> + 2 * <code>marginh</code> +
    <code>margin_vpad</code>.
  <li><var><A name="tdWidth">tdWidth</A></var>. The value is computed
    from the twidth, marginw, margin_hpad, and mwidth atributes using
    the expression
    <code>twidth</code> + 4 * <code>marginw</code> +
    <code>margin_hpad</code> + <code>mwidth</code>.
</ul>
<blockquote>
<pre>
&lt;!ELEMENT single (name)*&gt;
&lt;!ATTLIST single
	  max_thumbwidth CDATA #REQUIRED
	  max_thumbheight CDATA #REQUIRED
	  tiled (true | false) #IMPLIED
	  tiledWidth CDATA #IMPLIED
	  name CDATA #REQUIRED
	  linkedURL CDATA #REQUIRED
	  noLinkURL CDATA #REQUIRED&gt;
</pre>
</blockquote>
The single element's attributes are defined as follows:
<ul>
  <li><var>max_thumbwidth</var>. The width of a thumbnail image in pixels.
  <li><var>max_thumbheight</var>. The height of a thumbnail image in
    pixels.  If the images are tiled, this value must not be larger
    than the value of the tildedWidth attribute and will be reduced to
    that width if necessary.
  <li><var>tiled</var>. The value is <code>true</code> if the
    images are tiled (arranged in a grid); <code>false</code> if the
    images arranged vertically.
  <li><var>tiledWidth</var>. The width of the bounding box surrounding
    tiled images in units of pixels.  The default value is 670.
  <li><var>name</var>. This is the default print name for the layout
    as displayed in a combo box. Multiple name elements can also be
    provided to give locale-specific alternatives.
  <li><var>linkedURL</var>. URL of the template for the HTML file to
    generate when the HTML file contain links for each image to a
    corresponding higher-resolution image.
  <li><var>noLinkURL</var>. URL of the template for the HTML file to
    generate when the HTML file does not contain links for each image to a
    corresponding higher-resolution image.
</ul>


<blockquote>
<pre>
&lt;!ELEMENT name (#PCDATA)&gt;
&lt;!ATTLIST name
	  lang CDATA #REQUIRED&gt;
</pre>
</blockquote>

<H1><A NAME="templateFiles">Template Files</A></H1>
<P>
Webnail uses a template processor to create some of the HTML files and
Javascript files that Webnail generates. These files should start with
the following sequence of characters (there is no terminating newline
character or sequence of characters):
</P>
<blockquote>
<pre>
$(!M.T application/x.webnail-template)
</pre>
</blockquote>
<P>
This sequence of characters is used by file managers to recognize the
MIME type of a webnail-template file and display an appropriate icon
for the file.  The sequence may be prefaced by a byte-order mark, the
bytes 0xEF,0xBB,0xBF. The file should also end in the suffix ".wnt".
All template files should be UTF-8 encoded.
</P>
<P>
Template files use the following escapes and directives.
</P>
<UL>
  <li> The character <code>$</code> is represented by <code>$$</code>.
  <li> Directives start with "<code>$(</code>" and end with
    "<code>)</code>".
  <li> A directive starting with "<code>!</code>" indicates a comment,
    which will be removed.
  <li> A directive containing letters, digits, and periods will be replaced
       with a value, the same value for each use.
  <li> A directive consisting of two subdirectives, separated by a colon
    (<code>:</code>) with each subdirective consisting of letters, digits,
    and periods, indicates iteration.  The first subdirective indicates
    a replacement table to use and the second subdirective names a directive
    that ends the iteration.  The text in between will be repeated N times,
    with directives in the replacement table possibly changing from one
    iteration to the next.
</UL>
<P>
The following directives are recognized for toplevel HTML files:
</P>
<UL>
  <li><var>marginw</var>. Defined <A href="#marginw">above</A>.
  <li><var>marginh</var>. Defined <A href="#marginh">above</A>.
  <li><var>tWidth</var>. Defined <A href="#tWidth">above</A>.
  <li><var>tHeight</var>. Defined <A href="#tHeight">above</A>.
  <li><var>iWidth</var>. Defined <A href="#iWidth">above</A>.
  <li><var>iHeight</var>. Defined <A href="#iHeight">above</A>.
  <li><var>tdWidth</var>. Defined <A href="#tdWidth">above</A>.
  <li><var>windowTitle</var>. The TITLE element in the HTML head.
  <li><var>head</var>. HTML elements to add just before the end of
    the HEAD elment.
  <li><var>header</var>. HTML elements to add after the start of
    the BODY element.  The exact position is template dependent, but these
    elements should appear before the trailer elements.
  <li><var>title</var>. HTML elements to place as a title for a
    medium-sized image.  There may be a default title and per-image titles
    that can override the default.
  <li><var>description</var>. HTML elements to place as a
    description of a medium-sized image.  This will usually be below
    the title.  There may be a default description and per-image
    descriptions that can override the default.
  <li><var>trailer</var>. The exact position is template dependent, but
    these elements should appear after the header elements.
  <li><var>finalHtml</var>. The finalHtml elements appear
    after the final script element in the HTML file and immediately
    before the end of the BODY element.  This can be used to add
    additional scripts. Putting scripts at the end of an HTML file
    when feasible improves performance: a browser runs scripts
    sequentially and will not load an image or style sheet while a
    script is running. As a result, putting scripts near the start of
    an HTML file can increase the delay before images referenced in
    the file are loaded.
  <li><var>repeatrows</var>. Iterate over images.  The name reflects its
    use in a template that generates Javascript, where a
    <var>repeatrows</var> block is used to construct an array initializer.
  <li><var>hrefURL</var>. The URL that will be visited when a medium-scale
    image is clicked.  The value is changed during iteration.
  <li><var>hrefTarget</var>. The target frame corresponding to the
    <var>hrefURL</var>directive.  The value is changed during iteration.
  <li><var>fsImageURL</var>. The URL of a full-scale image relative to
    the top-level URL.
  <li><var>newTableRow</var>. The HTML sequence needed to start a new
    row in a table: <code>&lt;/TR&gt;&lt;TR&gt;</code> if a row should end
    and an empty string otherwise.
  <li><var>endrows</var>.  The conventional name for terminating
    an iteration started with code>repeatrows</code>, as used in the
    following examples.
</UL>
<P>
The following directives are used to set Javascript variables.
</P>
<UL>
  <li><var>hasAllImages</var>. The value is <code>true</code> if
    full-screen mode is supported; <code>false</code> otherwise.
  <li><var>imageTime</var>. The default duration of an image
    in milliseconds.
  <li><var>minImageTime</var>. The default minimum duration of an image
    in milliseconds when <var>syncMode</var> is <code>true</code>.
  <li><var>syncMode</var>. When <code>true</code> if one image is
    delayed, the duration of other images will be adjusted in an attempt to
    make the starting time of subsequent images to be what one would have
    expected.
  <li><var>waitOnError</var>. When <code>true</code>, if there is
    an error, the previous image will be displayed for the duration of the
    missing image in addition to the previous image's <!-- ' --> own duration.
  <li><var>highResDir</var>. The name of the subdirectory containing
    the highest resolution images available.  Values are either
    <code>medium</code> or <code>high</code>.
  <li><var>wOffset</var>. Amount to subtract from a browser
    window's  <!-- ' --> inner width to obtain the width of the bounding
    box for  images that will be displayed.
  <li><var>hOffset</var>. Amount to subtract from a browser
    window's  <!-- ' --> inner hieght to obtain the heigh of the
    bounding box for images that will be displayed.
  <li><var>wPercent</var>. After using <var>wOffset</var>, scale
    the image's bounding box's width by this amount, given as a percentage.
  <li><var>hPercent</var>. After using <var>wOffset</var>, scale
    the image's bounding box's height by this amount, given as a percentage.
</UL>
<P>
The following directives are also available, used by a Javascript template
during iteration over images in a <var>repeatrows</var> block.
</P>
<UL>
  <li><var>highImageURL</var>. The URL of high resolution images
    relative to a subdirectory.
  <li><var>imageFile</var>. The file name for an image - the last
    component in a pathname.
  <li><var>name</var>. The name of an image without the file extension.
  <li><var>mediumFile</var>. The name of a file in the
    <var>medium</var> diretory.
  <li><var>ext</var>. The file extension.
  <li><var>index</var>. The index number.
  <li><var>imageURL</var>. The name of an image in the thumbnail
    directory.
  <li><var>imageHtmlURL</var>. The name of an image in the 'medium'
    directory.
  <li><var>otherProps</var>. Additional properties to define as part
    of a Javascript initializer.
  <li><var>commaSeparator</var>. Either the empty string or a comma
    as needed for a Javascript initializer.
  <li><var>width</var>. The medium resolution image width.
  <li><var>height</var>. The medium resolution image height.
</UL>
<P>
</body>
</html>
